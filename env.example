# ==============================================================================
# FB Nova Data Sync - Environment Variables
# ==============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to source control!
# ==============================================================================

# ------------------------------------------------------------------------------
# Azure Storage Configuration
# ------------------------------------------------------------------------------
# Connection string for Azure Blob Storage (used for CSV staging)
STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=stsynfbnovadev;AccountKey=YOUR_KEY_HERE;EndpointSuffix=core.windows.net

# Storage Account Key (used in COPY INTO command for authentication)
STORAGE_KEY=YOUR_STORAGE_ACCOUNT_KEY

# Storage Account Name (default: stsynfbnovadev)
STORAGE_ACCOUNT=stsynfbnovadev

# Blob Container Name (default: synapsedata)
CONTAINER_NAME=synapsedata

# ------------------------------------------------------------------------------
# Service Principal Authentication (for automated/scheduled runs)
# ------------------------------------------------------------------------------
# Create a Service Principal with access to both Synapse databases:
#   az ad sp create-for-rbac --name "fb-nova-sync-sp"
#
# Grant the SP access to Synapse:
#   - Source: Reader role on FB_DW
#   - Target: Contributor role on sqlpoolfbnovadev

AZURE_CLIENT_ID=your-service-principal-client-id
AZURE_CLIENT_SECRET=your-service-principal-secret
AZURE_TENANT_ID=your-azure-tenant-id

# ------------------------------------------------------------------------------
# Interactive Authentication (for local testing only)
# ------------------------------------------------------------------------------
# Your Azure AD email address (will open browser for authentication)
USERNAME=your.email@famousbrands.co.za

# ------------------------------------------------------------------------------
# Source Database Configuration (Production)
# ------------------------------------------------------------------------------
SOURCE_SERVER=az-zan-sws-prod-01.sql.azuresynapse.net
SOURCE_DATABASE=FB_DW

# ------------------------------------------------------------------------------
# Target Database Configuration (Development)
# ------------------------------------------------------------------------------
TARGET_SERVER=synapse-fbnova-dev.sql.azuresynapse.net
TARGET_DATABASE=sqlpoolfbnovadev

# ==============================================================================
# NOTES
# ==============================================================================
# 
# Authentication Priority:
#   1. If AZURE_CLIENT_ID + AZURE_CLIENT_SECRET are set → Service Principal auth
#   2. If USERNAME is set → Interactive auth (browser popup)
#   3. If neither → Error
#
# For automated deployments (ACI, Azure Automation, etc.):
#   - Use Service Principal authentication
#   - Never use Interactive authentication
#
# For local development/testing:
#   - Either auth method works
#   - Interactive is easier for quick tests
#
# ==============================================================================

